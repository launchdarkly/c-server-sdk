<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C Server-Side SDK: include/launchdarkly/integrations/file_data.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C Server-Side SDK
   </div>
   <div id="projectbrief">LaunchDarkly SDK</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('file__data_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">file_data.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Public API for file data source.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;<a class="el" href="boolean_8h_source.html">launchdarkly/boolean.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="export_8h_source.html">launchdarkly/export.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="data__source_8h_source.html">launchdarkly/data_source.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for file_data.h:</div>
<div class="dyncontent">
<div class="center"><img src="file__data_8h__incl.png" border="0" usemap="#include_2launchdarkly_2integrations_2file__data_8h" alt=""/></div>
<map name="include_2launchdarkly_2integrations_2file__data_8h" id="include_2launchdarkly_2integrations_2file__data_8h">
</map>
</div>
</div>
<p><a href="file__data_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8d10636a840e35936d433b79785d32eb"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structLDDataSource.html">LDDataSource</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__data_8h.html#a8d10636a840e35936d433b79785d32eb">LDFileDataInit</a> (int fileCount, const char **filenames)</td></tr>
<tr class="memdesc:a8d10636a840e35936d433b79785d32eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an <a class="el" href="structLDDataSource.html">LDDataSource</a> which you can use to configure the client with a file data source.  <a href="#a8d10636a840e35936d433b79785d32eb">More...</a><br /></td></tr>
<tr class="separator:a8d10636a840e35936d433b79785d32eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Public API for file data source. </p>
<p>Integration between the LaunchDarkly SDK and file data.</p>
<p>The file data source allows you to use local files as a source of feature flag state. This would typically be used in a test environment, to operate using a predetermined feature flag state without an actual LaunchDarkly connection. See <a class="el" href="file__data_8h.html#a8d10636a840e35936d433b79785d32eb" title="Creates an LDDataSource which you can use to configure the client with a file data source...">LDFileDataInit()</a> for details. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8d10636a840e35936d433b79785d32eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d10636a840e35936d433b79785d32eb">&#9670;&nbsp;</a></span>LDFileDataInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structLDDataSource.html">LDDataSource</a>* LDFileDataInit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fileCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>filenames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an <a class="el" href="structLDDataSource.html">LDDataSource</a> which you can use to configure the client with a file data source. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fileCount</td><td>The number of filename arguments that are going to be passed in. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filenames</td><td>The filenames of the files to load flags from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a data source configuration object</dd></dl>
<p>This allows you to use local files as a source of feature flag state, instead of using an actual LaunchDarkly connection.</p>
<p>This function can be called with fileCount file names and will load them all into the data store. </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="structLDClient.html">LDClient</a> *client;</div><div class="line"><span class="keyword">struct </span><a class="code" href="structLDConfig.html">LDConfig</a> *config = makeMyConfig();</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *filenames[2] = {<span class="stringliteral">&quot;../tests/datafiles/flag-only.json&quot;</span>, <span class="stringliteral">&quot;../tests/datafiles/flag-with-duplicate-key.json&quot;</span>};</div><div class="line"></div><div class="line"><a class="code" href="config_8h.html#afcc6ba6cd9abb32a954700c2c9781d23">LDConfigSetDataSource</a>(config, <a class="code" href="file__data_8h.html#a8d10636a840e35936d433b79785d32eb">LDFileDataInit</a>(2, filenames));</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!(client = <a class="code" href="client_8h.html#aa1b880269a6ddef2b82dec9517ad1111">LDClientInit</a>(config, 10))) {</div><div class="line">    <a class="code" href="config_8h.html#a3dd39b7723ab6bb02954fcf4901e8c04">LDConfigFree</a>(config);</div><div class="line">    <span class="keywordflow">return</span>;</div><div class="line">}</div></div><!-- fragment --><p>This will cause the client <em>not</em> to connect to LaunchDarkly to get feature flags. The client may still make network connections to send analytics events, unless you have disabled this with <a class="el" href="config_8h.html#aa8217701ea8bcfd55e559a25687b3690" title="Sets whether to send analytics events back to LaunchDarkly. By default, the client will send events...">LDConfigSetSendEvents()</a>.</p>
<p>Flag data files should be encoded using JSON. They contain an object with three possible properties: </p><ul>
<li><code>flags</code> Feature flag definitions. </li>
<li><code>flagVersions</code> Simplified feature flags that contain only a value. </li>
<li><code>segments</code> User segment definitions.</li>
</ul>
<p>The format of the data in <code>flags</code> and <code>segments</code> is defined by the LaunchDarkly application and is subject to change. Rather than trying to construct these objects yourself, it is simpler to request existing flags directly from the LaunchDarkly server in JSON format, and use this output as the starting point for your file. In Linux you would do this: </p><div class="fragment"><div class="line">curl -H &quot;Authorization: {your sdk key}&quot; https://app.launchdarkly.com/sdk/latest-all</div></div><!-- fragment --><p>The output will look something like this (but with many more properties): </p><div class="fragment"><div class="line">{</div><div class="line">    &quot;flags&quot;: {</div><div class="line">        &quot;flag-key-1&quot;: {</div><div class="line">            &quot;key&quot;: &quot;flag-key-1&quot;,</div><div class="line">            &quot;on&quot;: true,</div><div class="line">            &quot;variations&quot;: [ &quot;a&quot;, &quot;b&quot; ]</div><div class="line">        },</div><div class="line">        &quot;flag-key-2&quot;: {</div><div class="line">            &quot;key&quot;: &quot;flag-key-2&quot;,</div><div class="line">            &quot;on&quot;: true,</div><div class="line">            &quot;variations&quot;: [ &quot;c&quot;, &quot;d&quot; ]</div><div class="line">        }</div><div class="line">    },</div><div class="line">    &quot;segments&quot;: {</div><div class="line">        &quot;segment-key-1&quot;: {</div><div class="line">            &quot;key&quot;: &quot;segment-key-1&quot;,</div><div class="line">            &quot;includes&quot;: [ &quot;user-key-1&quot; ]</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>Data in this format allows the SDK to exactly duplicate all the kinds of flag behavior supported by LaunchDarkly. However, in many cases you will not need this complexity, but will just want to set specific flag keys to specific values. For that, you can use a much simpler format:</p>
<div class="fragment"><div class="line">{</div><div class="line">    &quot;flagValues&quot;: {</div><div class="line">        &quot;my-string-flag-key&quot;: &quot;value-1&quot;,</div><div class="line">        &quot;my-boolean-flag-key&quot;: true,</div><div class="line">        &quot;my-integer-flag-key&quot;: 3</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>It is also possible to specify both <code>flags</code> and <code>flagValues</code>, if you want some flags to have simple values and others to have complex behavior. However, it is an error to use the same flag key or segment key more than once, either in a single file or across multiple files.</p>
<p>If the data source encounters a duplicate key it will ignore it and use the previously loaded flag. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_efe5b79025e5a9a1c6aba444011d94a7.html">launchdarkly</a></li><li class="navelem"><a class="el" href="dir_8b596f9106a6dd93936bdaf294b0477b.html">integrations</a></li><li class="navelem"><a class="el" href="file__data_8h.html">file_data.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
